[global_tags]
  project = "iotcrashcourse"

[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = "0s"
  hostname = "telegrafinput"
  omit_hostname = false

[[inputs.tail]]
  files = [
    "/tmp/mocksensor/ouput_mock_sensor_1.json",
    "/tmp/mocksensor/ouput_mock_sensor_2.json"
  ]
  data_format = "json"
  
  # --- BLOQUE DE CONFIGURACIÃ“N JSON (Solo una vez) ---
  tag_keys = ["device_id", "client_id"]
  json_name_key = "sensor_type"
  json_time_key = "timestamp"
  json_time_format = "unix"
  # ---------------------------------------------------

[[outputs.mqtt]]
  servers = ["emqx:1883"]
  username = "fyntek"
  password = "dlgfyntek0912"

  topic_prefix = "telegraf"
  qos = 2
  data_format = "influx"
  retain = true
